{
  "version": 3,
  "sources": ["../../three/examples/jsm/exporters/OBJExporter.js"],
  "sourcesContent": ["import {\r\n\tColor,\r\n\tMatrix3,\r\n\tVector2,\r\n\tVector3\r\n} from 'three';\r\n\r\nclass OBJExporter {\r\n\r\n\tparse( object ) {\r\n\r\n\t\tlet output = '';\r\n\r\n\t\tlet indexVertex = 0;\r\n\t\tlet indexVertexUvs = 0;\r\n\t\tlet indexNormals = 0;\r\n\r\n\t\tconst vertex = new Vector3();\r\n\t\tconst color = new Color();\r\n\t\tconst normal = new Vector3();\r\n\t\tconst uv = new Vector2();\r\n\r\n\t\tconst face = [];\r\n\r\n\t\tfunction parseMesh( mesh ) {\r\n\r\n\t\t\tlet nbVertex = 0;\r\n\t\t\tlet nbNormals = 0;\r\n\t\t\tlet nbVertexUvs = 0;\r\n\r\n\t\t\tconst geometry = mesh.geometry;\r\n\r\n\t\t\tconst normalMatrixWorld = new Matrix3();\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst vertices = geometry.getAttribute( 'position' );\r\n\t\t\tconst normals = geometry.getAttribute( 'normal' );\r\n\t\t\tconst uvs = geometry.getAttribute( 'uv' );\r\n\t\t\tconst indices = geometry.getIndex();\r\n\r\n\t\t\t// name of the mesh object\r\n\t\t\toutput += 'o ' + mesh.name + '\\n';\r\n\r\n\t\t\t// name of the mesh material\r\n\t\t\tif ( mesh.material && mesh.material.name ) {\r\n\r\n\t\t\t\toutput += 'usemtl ' + mesh.material.name + '\\n';\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// vertices\r\n\r\n\t\t\tif ( vertices !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0, l = vertices.count; i < l; i ++, nbVertex ++ ) {\r\n\r\n\t\t\t\t\tvertex.fromBufferAttribute( vertices, i );\r\n\r\n\t\t\t\t\t// transform the vertex to world space\r\n\t\t\t\t\tvertex.applyMatrix4( mesh.matrixWorld );\r\n\r\n\t\t\t\t\t// transform the vertex to export format\r\n\t\t\t\t\toutput += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// uvs\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0, l = uvs.count; i < l; i ++, nbVertexUvs ++ ) {\r\n\r\n\t\t\t\t\tuv.fromBufferAttribute( uvs, i );\r\n\r\n\t\t\t\t\t// transform the uv to export format\r\n\t\t\t\t\toutput += 'vt ' + uv.x + ' ' + uv.y + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\tnormalMatrixWorld.getNormalMatrix( mesh.matrixWorld );\r\n\r\n\t\t\t\tfor ( let i = 0, l = normals.count; i < l; i ++, nbNormals ++ ) {\r\n\r\n\t\t\t\t\tnormal.fromBufferAttribute( normals, i );\r\n\r\n\t\t\t\t\t// transform the normal to world space\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrixWorld ).normalize();\r\n\r\n\t\t\t\t\t// transform the normal to export format\r\n\t\t\t\t\toutput += 'vn ' + normal.x + ' ' + normal.y + ' ' + normal.z + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\tfor ( let i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( let m = 0; m < 3; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst j = indices.getX( i + m ) + 1;\r\n\r\n\t\t\t\t\t\tface[ m ] = ( indexVertex + j ) + ( normals || uvs ? '/' + ( uvs ? ( indexVertexUvs + j ) : '' ) + ( normals ? '/' + ( indexNormals + j ) : '' ) : '' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// transform the face to export format\r\n\t\t\t\t\toutput += 'f ' + face.join( ' ' ) + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( let m = 0; m < 3; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst j = i + m + 1;\r\n\r\n\t\t\t\t\t\tface[ m ] = ( indexVertex + j ) + ( normals || uvs ? '/' + ( uvs ? ( indexVertexUvs + j ) : '' ) + ( normals ? '/' + ( indexNormals + j ) : '' ) : '' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// transform the face to export format\r\n\t\t\t\t\toutput += 'f ' + face.join( ' ' ) + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update index\r\n\t\t\tindexVertex += nbVertex;\r\n\t\t\tindexVertexUvs += nbVertexUvs;\r\n\t\t\tindexNormals += nbNormals;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseLine( line ) {\r\n\r\n\t\t\tlet nbVertex = 0;\r\n\r\n\t\t\tconst geometry = line.geometry;\r\n\t\t\tconst type = line.type;\r\n\r\n\t\t\t// shortcuts\r\n\t\t\tconst vertices = geometry.getAttribute( 'position' );\r\n\r\n\t\t\t// name of the line object\r\n\t\t\toutput += 'o ' + line.name + '\\n';\r\n\r\n\t\t\tif ( vertices !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0, l = vertices.count; i < l; i ++, nbVertex ++ ) {\r\n\r\n\t\t\t\t\tvertex.fromBufferAttribute( vertices, i );\r\n\r\n\t\t\t\t\t// transform the vertex to world space\r\n\t\t\t\t\tvertex.applyMatrix4( line.matrixWorld );\r\n\r\n\t\t\t\t\t// transform the vertex to export format\r\n\t\t\t\t\toutput += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'Line' ) {\r\n\r\n\t\t\t\toutput += 'l ';\r\n\r\n\t\t\t\tfor ( let j = 1, l = vertices.count; j <= l; j ++ ) {\r\n\r\n\t\t\t\t\toutput += ( indexVertex + j ) + ' ';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput += '\\n';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'LineSegments' ) {\r\n\r\n\t\t\t\tfor ( let j = 1, k = j + 1, l = vertices.count; j < l; j += 2, k = j + 1 ) {\r\n\r\n\t\t\t\t\toutput += 'l ' + ( indexVertex + j ) + ' ' + ( indexVertex + k ) + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update index\r\n\t\t\tindexVertex += nbVertex;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parsePoints( points ) {\r\n\r\n\t\t\tlet nbVertex = 0;\r\n\r\n\t\t\tconst geometry = points.geometry;\r\n\r\n\t\t\tconst vertices = geometry.getAttribute( 'position' );\r\n\t\t\tconst colors = geometry.getAttribute( 'color' );\r\n\r\n\t\t\toutput += 'o ' + points.name + '\\n';\r\n\r\n\t\t\tif ( vertices !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0, l = vertices.count; i < l; i ++, nbVertex ++ ) {\r\n\r\n\t\t\t\t\tvertex.fromBufferAttribute( vertices, i );\r\n\t\t\t\t\tvertex.applyMatrix4( points.matrixWorld );\r\n\r\n\t\t\t\t\toutput += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z;\r\n\r\n\t\t\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\t\t\tcolor.fromBufferAttribute( colors, i ).convertLinearToSRGB();\r\n\r\n\t\t\t\t\t\toutput += ' ' + color.r + ' ' + color.g + ' ' + color.b;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput += '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput += 'p ';\r\n\r\n\t\t\t\tfor ( let j = 1, l = vertices.count; j <= l; j ++ ) {\r\n\r\n\t\t\t\t\toutput += ( indexVertex + j ) + ' ';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput += '\\n';\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update index\r\n\t\t\tindexVertex += nbVertex;\r\n\r\n\t\t}\r\n\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.isMesh === true ) {\r\n\r\n\t\t\t\tparseMesh( child );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( child.isLine === true ) {\r\n\r\n\t\t\t\tparseLine( child );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( child.isPoints === true ) {\r\n\r\n\t\t\t\tparsePoints( child );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn output;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { OBJExporter };\r\n"],
  "mappings": "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",
  "names": []
}
